<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>AGRIVOLUTION ‚Äî Wishlist</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="css/style.css" />
  <script>
    (function(){
      const savedTheme = localStorage.getItem('theme') || 'dark';
      document.documentElement.setAttribute('data-theme', savedTheme);
    })();
  </script>
</head>
<body>
  <header class="header">
    <div class="container header-inner">
      <div class="brand" onclick="location.href='index.html'"><div class="logo-circle">üå±</div><h1>AGRIVOLUTION</h1></div>
      <nav class="nav">
        <a href="index.html">Home</a>
        <a href="customer-shop.html">Shop</a>
        <a href="orders.html">My Orders</a>
        <a href="cart.html">Cart <span id="cart-count" style="background:#2563eb;color:white;border-radius:10px;padding:2px 6px;font-size:11px;margin-left:4px">0</span></a>
        <a href="wishlist.html" class="active">Wishlist</a>
        <button id="theme-toggle" class="theme-toggle" aria-label="Toggle dark mode">üåô</button>
        <a href="#" onclick="logout()" style="background:transparent;border:1px solid rgba(37,99,235,0.12);padding:8px 12px;border-radius:8px;color:#2563eb">Logout</a>
      </nav>
    </div>
  </header>

  <main class="section">
    <div class="container">
      <h1 style="font-size:36px;margin:0 0 32px;color:var(--text)">My Wishlist</h1>

      <div id="wishlist-grid" class="grid" style="grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:24px">
        <!-- Wishlist items will be loaded here -->
      </div>
    </div>
  </main>

  <footer class="footer">
    <div class="container">
      <div class="footer-main">
        <div class="footer-brand">
          <div class="footer-logo">
            <div class="logo-circle">üå±</div>
            <h2>AGRIVOLUTION</h2>
          </div>
        </div>
      </div>
    </div>
  </footer>

  <script src="js/data.js"></script>
  <script src="js/script.js"></script>
  <script>
    const allProducts = [
      {id:1,name:'Fresh Tomatoes',price:45,image:'https://images.unsplash.com/photo-1546097488-9e0c4ce4f87e?w=400',unit:'kg'},
      {id:2,name:'Organic Potatoes',price:35,image:'https://images.unsplash.com/photo-1518977822534-7049a61ee0c2?w=400',unit:'kg'},
      {id:3,name:'Fresh Onions',price:30,image:'https://images.unsplash.com/photo-1518977822534-7049a61ee0c2?w=400',unit:'kg'},
      {id:4,name:'Sweet Mangoes',price:80,image:'https://images.unsplash.com/photo-1605027990121-c0a3eccf7443?w=400',unit:'kg'},
      {id:5,name:'Fresh Bananas',price:40,image:'https://images.unsplash.com/photo-1571771894821-ce9b6c11b08e?w=400',unit:'dozen'},
      {id:6,name:'Basmati Rice',price:120,image:'https://images.unsplash.com/photo-1586201375761-83865001e31c?w=400',unit:'kg'},
      {id:7,name:'Wheat Flour',price:50,image:'https://images.unsplash.com/photo-1615485925503-7ec8340b4302?w=400',unit:'kg'},
      {id:8,name:'Turmeric Powder',price:200,image:'https://images.unsplash.com/photo-1615485925503-7ec8340b4302?w=400',unit:'100g'},
      {id:9,name:'Red Chili Powder',price:150,image:'https://images.unsplash.com/photo-1615485925503-7ec8340b4302?w=400',unit:'100g'},
      {id:10,name:'Fresh Milk',price:60,image:'https://images.unsplash.com/photo-1563636619-e9143da7973b?w=400',unit:'liter'},
      {id:11,name:'Farm Fresh Eggs',price:90,image:'https://images.unsplash.com/photo-1582722872445-44dc5f7e3c8f?w=400',unit:'dozen'},
      {id:12,name:'Organic Ghee',price:600,image:'https://images.unsplash.com/photo-1582722872445-44dc5f7e3c8f?w=400',unit:'500g'}
    ];

    function loadWishlist(){
      const wishlist = JSON.parse(localStorage.getItem('wishlist') || '[]');
      const grid = document.getElementById('wishlist-grid');
      if(!grid) return;

      if(wishlist.length === 0){
        grid.innerHTML = `
          <div class="card" style="text-align:center;padding:48px;grid-column:1/-1">
            <div style="font-size:64px;margin-bottom:16px">‚ù§Ô∏è</div>
            <h3 style="color:var(--text);margin:0 0 12px">Your wishlist is empty</h3>
            <p style="color:var(--muted);margin:0 0 24px">Add products to your wishlist to save them for later</p>
            <button class="btn btn-primary" onclick="location.href='customer-shop.html'" style="background:linear-gradient(135deg, #2563eb, #1d4ed8)">Start Shopping</button>
          </div>
        `;
        return;
      }

      grid.innerHTML = '';
      wishlist.forEach(id=>{
        const product = allProducts.find(p=>p.id===id);
        if(!product) return;
        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `
          <div style="position:relative;overflow:hidden;border-radius:12px;height:200px;margin-bottom:16px">
            <img src="${product.image}" style="width:100%;height:100%;object-fit:cover" alt="${product.name}"/>
            <button onclick="removeFromWishlist(${product.id})" style="position:absolute;top:12px;right:12px;width:36px;height:36px;border-radius:50%;border:none;background:rgba(255,255,255,0.9);cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:18px">‚ù§Ô∏è</button>
          </div>
          <h3 style="margin:0 0 8px;color:var(--text);font-size:18px">${product.name}</h3>
          <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
            <div>
              <div style="font-size:24px;font-weight:700;color:#2563eb">‚Çπ${product.price}</div>
              <div style="font-size:13px;color:var(--muted)">per ${product.unit}</div>
            </div>
          </div>
          <button class="btn btn-primary" onclick="addToCart(${product.id})" style="width:100%;justify-content:center;padding:12px;background:linear-gradient(135deg, #2563eb, #1d4ed8)">Add to Cart</button>
        `;
        grid.appendChild(card);
      });
    }

    function removeFromWishlist(id){
      let wishlist = JSON.parse(localStorage.getItem('wishlist') || '[]');
      wishlist = wishlist.filter(w=>w!==id);
      localStorage.setItem('wishlist',JSON.stringify(wishlist));
      loadWishlist();
    }

    function addToCart(id){
      let cart = JSON.parse(localStorage.getItem('cart') || '[]');
      const product = allProducts.find(p=>p.id===id);
      const existing = cart.findIndex(item=>item.id===id);
      if(existing>=0){
        cart[existing].quantity++;
      } else {
        cart.push({...product,quantity:1});
      }
      localStorage.setItem('cart',JSON.stringify(cart));
      updateCartCount();
      alert(`${product.name} added to cart!`);
    }

    function updateCartCount(){
      const cart = JSON.parse(localStorage.getItem('cart') || '[]');
      const count = cart.reduce((sum,item)=>sum+item.quantity,0);
      const countEl = document.getElementById('cart-count');
      if(countEl) countEl.textContent = count;
    }

    loadWishlist();
    updateCartCount();
  </script>
</body>
</html>

